package com.akihabara.market.controller;

import com.akihabara.market.dao.ProductoDAO;
import com.akihabara.market.model.ProductoOtaku;
import com.akihabara.market.view.InterfazConsola;

import java.util.List;

public class AkihabaraController {
    private InterfazConsola vista;
    private ProductoDAO dao;

    public AkihabaraController() {
        vista = new InterfazConsola();
        dao = new ProductoDAO();
    }

    public void iniciar() {
        int opcion;

        do {
            vista.mostrarMenu();
            opcion = vista.leerOpcion();

            switch (opcion) {
                case 1:
                    ProductoOtaku nuevo = vista.leerDatosProducto();
                    dao.agregarProducto(nuevo);
                    break;

                case 2:
                    int id = vista.pedirIdProducto();
                    ProductoOtaku buscado = dao.obtenerProductoPorId(id);
                    vista.mostrarProducto(buscado);
                    break;

                case 3:
                    List<ProductoOtaku> todos = dao.obtenerTodosLosProductos();
                    vista.mostrarProductos(todos);
                    break;

                case 4:
                    String nombre = vista.pedirNombreProducto();
                    List<ProductoOtaku> porNombre = dao.buscarProductosPorNombre(nombre);
                    vista.mostrarProductos(porNombre);
                    break;

                case 5:
                    String categoria = vista.pedirCategoriaProducto();
                    List<ProductoOtaku> porCategoria = dao.buscarProductoPorCategoria(categoria);
                    vista.mostrarProductos(porCategoria);
                    break;

                case 6:
                    ProductoOtaku actualizado = vista.leerDatosProductoConId();
                    dao.actualizarProducto(actualizado);
                 
                    break;

                case 7:
                    int idEliminar = vista.pedirIdProducto();
                    boolean eliminado = dao.eliminarProducto(idEliminar);
                    vista.mostrarMensaje("Producto eliminado: " + eliminado);
                    break;

                case 8:
                    vista.mostrarMensaje("Saliendo del sistema. ¡Gracias!");
                    break;

                default:
                    vista.mostrarMensaje("Opción inválida. Intenta de nuevo.");
            }

        } while (opcion != 8);
    }
}
